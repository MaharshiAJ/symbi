{% extends "base.html" %}
{% block content %}
    <div class="container mx-auto my-60">
        <div>
            <div class="bg-white relative shadow-lg rounded-lg w-5/6 md:w-5/6 lg:w-4/6 xl:w-3/6 mx-auto">
                <div class="flex justify-center">
                    <div class="rounded-full bg-[#ff6a45] flex items-center justify-center ml-2 mx-auto absolute -top-20 w-32 h-32 shadow-md border-4 border-white transition duration-200 transform hover:scale-110">
                        <span class="text-white text-3xl">{{ profile.username|first|capfirst }}</span>
                    </div>
                    <div class="mt-16">
                        <h1 class="font-bold text-center text-3xl text-gray-900">{{ profile.username|capfirst }}</h1>
                        <p class="text-center text-sm text-gray-400 font-medium">
                            Pronouns:
                            {% if profile.pronouns == profile.Pronouns.SHE %}
                                She/Her
                            {% elif profile.pronouns == profile.Pronouns.HE %}
                                He/Him
                            {% elif profile.pronouns == profile.Pronouns.THEY %}
                                They/Them
                            {% elif profile.pronouns == profile.Pronouns.OTHER %}
                                Other
                            {% endif %}
                        </p>
                        <p class="text-center text-sm text-gray-400 font-medium">
                            Interested in:
                            {% for tag in profile.tags.all %}
                                {{ tag.name|capfirst }}
                                {% if not forloop.last %},{% endif %}
                            {% endfor %}
                        </p>
                        {% if user == profile %}
                            <div class="flex justify-between items-center my-5 px-6">
                                <a href="#"
                                   class="relative inline-flex items-center justify-center p-4 px-6 py-3 overflow-hidden font-medium text-[#ff6a45] transition duration-300 ease-out border-2 border-[#ff6a45] rounded-full shadow-md group">
                                    <span class="absolute inset-0 flex items-center justify-center w-full h-full text-white duration-300 -translate-x-full bg-[#ff6a45] group-hover:translate-x-0 ease">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             fill="none"
                                             viewBox="0 0 24 24"
                                             stroke-width="1.5"
                                             stroke="currentColor"
                                             class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" />
                                        </svg>
                                    </span>
                                    <span class="absolute flex items-center justify-center w-full h-full text-[#ff6a45] transition-all duration-300 transform group-hover:translate-x-full ease">Edit Profile</span>
                                    <span class="relative invisible">Edit Profile</span>
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
                {% if user == profile %}
                    <div class="flex flex-wrap mx-5" id="tabs-id">
                        <div class="w-full">
                            <ul class="flex mb-0 list-none flex-wrap pt-3 pb-4 flex-row">
                                <li class="-mb-px mr-2 last:mr-0 flex-auto text-center">
                                    <a class="text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal text-white bg-[#ff6a45]"
                                       onclick="changeActiveTab(event,'tab-active-posts')">
                                        <i class="fas fa-space-shuttle text-base mr-1"></i>  Active Posts
                                    </a>
                                </li>
                                <li class="-mb-px mr-2 last:mr-0 flex-auto text-center">
                                    <a class="text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal text-[#ff6a45] bg-white"
                                       onclick="changeActiveTab(event,'tab-drafted-posts')">
                                        <i class="fas fa-cog text-base mr-1"></i>  Drafted Posts
                                    </a>
                                </li>
                                <li class="-mb-px mr-2 last:mr-0 flex-auto text-center">
                                    <a class="text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal text-[#ff6a45] bg-white"
                                       onclick="changeActiveTab(event,'tab-archived-posts')">
                                        <i class="fas fa-briefcase text-base mr-1"></i>  Archived Posts
                                    </a>
                                </li>
                            </ul>
                            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded">
                                <div class="px-4 py-5 flex-auto">
                                    <div class="tab-content tab-space">
                                        <div class="block" id="tab-active-posts">
                                            {% if active_posts %}
                                                {% for post in active_posts %}
                                                    {% include "posts/post_card.html" with post=post %}
                                                {% endfor %}
                                            {% else %}
                                                <p>No Active Posts. You should make one!</p>
                                            {% endif %}
                                        </div>
                                        <div class="hidden" id="tab-drafted-posts">
                                            {% if drafted_posts %}
                                                {% for post in drafted_posts %}
                                                    {% include "posts/post_card.html" with post=post %}
                                                {% endfor %}
                                            {% else %}
                                                <p>No Drafted Posts</p>
                                            {% endif %}
                                        </div>
                                        <div class="hidden" id="tab-archived-posts">
                                            {% if drafted_posts %}
                                                {% for post in drafted_posts %}
                                                    {% include "posts/post_card.html" with post=post %}
                                                {% endfor %}
                                            {% else %}
                                                <p>No Archived Posts</p>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script type="text/javascript">
                function changeActiveTab(event,tabID){
                  let element = event.target;
                  while(element.nodeName !== "A"){
                    element = element.parentNode;
                  }
                  ulElement = element.parentNode.parentNode;
                  aElements = ulElement.querySelectorAll("li > a");
                  tabContents = document.getElementById("tabs-id").querySelectorAll(".tab-content > div");
                  for(let i = 0 ; i < aElements.length; i++){
                    aElements[i].classList.remove("text-white");
                    aElements[i].classList.remove("bg-[#ff6a45]");
                    aElements[i].classList.add("text-[#ff6a45]");
                    aElements[i].classList.add("bg-white");
                    tabContents[i].classList.add("hidden");
                    tabContents[i].classList.remove("block");
                  }
                  element.classList.remove("text-[#ff6a45]");
                  element.classList.remove("bg-white");
                  element.classList.add("text-white");
                  element.classList.add("bg-[#ff6a45]");
                  document.getElementById(tabID).classList.remove("hidden");
                  document.getElementById(tabID).classList.add("block");
                }
                    </script>
                </div>
            {% else %}
            {% endif %}
        </div>
    </div>
{% endblock content %}
